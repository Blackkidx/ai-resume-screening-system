{"ast":null,"code":"// frontend/src/services/adminService.js\nimport { API_BASE_URL } from '../config';\nimport authService from './authService';\nclass AdminService {\n  constructor() {\n    this.baseURL = API_BASE_URL;\n  }\n\n  // สร้าง headers สำหรับ API requests\n  getAuthHeaders() {\n    const token = authService.getToken();\n    return {\n      'Content-Type': 'application/json',\n      ...(token && {\n        'Authorization': `Bearer ${token}`\n      })\n    };\n  }\n\n  // ✅ ดึงข้อมูล Dashboard Stats\n  async getDashboardStats() {\n    try {\n      const response = await fetch(`${this.baseURL}/api/admin/dashboard`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.detail || 'Failed to fetch dashboard stats');\n      }\n      return {\n        success: true,\n        data: data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // ✅ ดึงรายการผู้ใช้ทั้งหมด\n  async getUsers(params = {}) {\n    try {\n      const queryParams = new URLSearchParams();\n      if (params.page) queryParams.append('page', params.page);\n      if (params.limit) queryParams.append('limit', params.limit);\n      if (params.search) queryParams.append('search', params.search);\n      if (params.user_type) queryParams.append('user_type', params.user_type);\n      if (params.is_active !== null && params.is_active !== undefined) {\n        queryParams.append('is_active', params.is_active);\n      }\n      const response = await fetch(`${this.baseURL}/api/admin/users?${queryParams}`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.detail || 'Failed to fetch users');\n      }\n      return {\n        success: true,\n        data: data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // ✅ ดึงข้อมูลผู้ใช้ตาม ID\n  async getUserById(userId) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/admin/users/${userId}`, {\n        method: 'GET',\n        headers: this.getAuthHeaders()\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.detail || 'Failed to fetch user');\n      }\n      return {\n        success: true,\n        data: data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // ✅ อัปเดตข้อมูลผู้ใช้\n  async updateUser(userId, userData) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/admin/users/${userId}`, {\n        method: 'PUT',\n        headers: this.getAuthHeaders(),\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.detail || 'Failed to update user');\n      }\n      return {\n        success: true,\n        data: data,\n        message: 'อัปเดตข้อมูลผู้ใช้สำเร็จ'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // ✅ ลบผู้ใช้\n  async deleteUser(userId) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/admin/users/${userId}`, {\n        method: 'DELETE',\n        headers: this.getAuthHeaders()\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.detail || 'Failed to delete user');\n      }\n      return {\n        success: true,\n        data: data,\n        message: 'ลบผู้ใช้สำเร็จ'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // ✅ สร้างผู้ใช้ใหม่\n  async createUser(userData) {\n    try {\n      const response = await fetch(`${this.baseURL}/api/admin/users`, {\n        method: 'POST',\n        headers: this.getAuthHeaders(),\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.detail || 'Failed to create user');\n      }\n      return {\n        success: true,\n        data: data,\n        message: 'สร้างผู้ใช้ใหม่สำเร็จ'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // ✅ ตรวจสอบสิทธิ์ Admin\n  isAdmin(user) {\n    if (!user) return false;\n    return user.user_type === 'Admin' || user.roles && user.roles.includes('Admin');\n  }\n\n  // ✅ ดึงข้อมูลสถิติเพิ่มเติม (ถ้าต้องการ)\n  async getAdvancedStats() {\n    try {\n      // สามารถเพิ่ม endpoint อื่นๆ ได้ตามต้องการ\n      // เช่น สถิติการ login, การใช้งานระบบ, etc.\n\n      return {\n        success: true,\n        data: {\n          // placeholder data\n        }\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n}\n\n// Create singleton instance\nconst adminServiceInstance = new AdminService();\nexport default adminServiceInstance;","map":{"version":3,"names":["API_BASE_URL","authService","AdminService","constructor","baseURL","getAuthHeaders","token","getToken","getDashboardStats","response","fetch","method","headers","data","json","ok","Error","detail","success","error","message","getUsers","params","queryParams","URLSearchParams","page","append","limit","search","user_type","is_active","undefined","getUserById","userId","updateUser","userData","body","JSON","stringify","deleteUser","createUser","isAdmin","user","roles","includes","getAdvancedStats","adminServiceInstance"],"sources":["D:/ai-resume-screening-system/frontend/src/services/adminService.js"],"sourcesContent":["// frontend/src/services/adminService.js\r\nimport { API_BASE_URL } from '../config';\r\nimport authService from './authService';\r\n\r\nclass AdminService {\r\n  constructor() {\r\n    this.baseURL = API_BASE_URL;\r\n  }\r\n\r\n  // สร้าง headers สำหรับ API requests\r\n  getAuthHeaders() {\r\n    const token = authService.getToken();\r\n    return {\r\n      'Content-Type': 'application/json',\r\n      ...(token && { 'Authorization': `Bearer ${token}` })\r\n    };\r\n  }\r\n\r\n  // ✅ ดึงข้อมูล Dashboard Stats\r\n  async getDashboardStats() {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}/api/admin/dashboard`, {\r\n        method: 'GET',\r\n        headers: this.getAuthHeaders(),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.detail || 'Failed to fetch dashboard stats');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data: data\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  // ✅ ดึงรายการผู้ใช้ทั้งหมด\r\n  async getUsers(params = {}) {\r\n    try {\r\n      const queryParams = new URLSearchParams();\r\n      \r\n      if (params.page) queryParams.append('page', params.page);\r\n      if (params.limit) queryParams.append('limit', params.limit);\r\n      if (params.search) queryParams.append('search', params.search);\r\n      if (params.user_type) queryParams.append('user_type', params.user_type);\r\n      if (params.is_active !== null && params.is_active !== undefined) {\r\n        queryParams.append('is_active', params.is_active);\r\n      }\r\n\r\n      const response = await fetch(`${this.baseURL}/api/admin/users?${queryParams}`, {\r\n        method: 'GET',\r\n        headers: this.getAuthHeaders(),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.detail || 'Failed to fetch users');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data: data\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  // ✅ ดึงข้อมูลผู้ใช้ตาม ID\r\n  async getUserById(userId) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}/api/admin/users/${userId}`, {\r\n        method: 'GET',\r\n        headers: this.getAuthHeaders(),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.detail || 'Failed to fetch user');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data: data\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  // ✅ อัปเดตข้อมูลผู้ใช้\r\n  async updateUser(userId, userData) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}/api/admin/users/${userId}`, {\r\n        method: 'PUT',\r\n        headers: this.getAuthHeaders(),\r\n        body: JSON.stringify(userData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.detail || 'Failed to update user');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data: data,\r\n        message: 'อัปเดตข้อมูลผู้ใช้สำเร็จ'\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  // ✅ ลบผู้ใช้\r\n  async deleteUser(userId) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}/api/admin/users/${userId}`, {\r\n        method: 'DELETE',\r\n        headers: this.getAuthHeaders(),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.detail || 'Failed to delete user');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data: data,\r\n        message: 'ลบผู้ใช้สำเร็จ'\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  // ✅ สร้างผู้ใช้ใหม่\r\n  async createUser(userData) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}/api/admin/users`, {\r\n        method: 'POST',\r\n        headers: this.getAuthHeaders(),\r\n        body: JSON.stringify(userData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.detail || 'Failed to create user');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data: data,\r\n        message: 'สร้างผู้ใช้ใหม่สำเร็จ'\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  // ✅ ตรวจสอบสิทธิ์ Admin\r\n  isAdmin(user) {\r\n    if (!user) return false;\r\n    return user.user_type === 'Admin' || (user.roles && user.roles.includes('Admin'));\r\n  }\r\n\r\n  // ✅ ดึงข้อมูลสถิติเพิ่มเติม (ถ้าต้องการ)\r\n  async getAdvancedStats() {\r\n    try {\r\n      // สามารถเพิ่ม endpoint อื่นๆ ได้ตามต้องการ\r\n      // เช่น สถิติการ login, การใช้งานระบบ, etc.\r\n      \r\n      return {\r\n        success: true,\r\n        data: {\r\n          // placeholder data\r\n        }\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nconst adminServiceInstance = new AdminService();\r\n\r\nexport default adminServiceInstance;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}