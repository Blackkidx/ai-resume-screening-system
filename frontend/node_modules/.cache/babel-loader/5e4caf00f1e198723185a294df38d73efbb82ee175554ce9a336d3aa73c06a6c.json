{"ast":null,"code":"var _s = $RefreshSig$();\n// frontend/src/hooks/useProfile.js - Improved Version with Real-time Updates\nimport { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nconst useProfile = () => {\n  _s();\n  const {\n    user,\n    isAuthenticated\n  } = useAuth();\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // ฟังก์ชันดึงข้อมูล Profile\n  const fetchProfile = useCallback(async () => {\n    if (!isAuthenticated() || !user) {\n      setLoading(false);\n      return;\n    }\n    try {\n      setLoading(true);\n      setError(null);\n      const token = localStorage.getItem('access_token');\n      const response = await fetch('http://localhost:8000/api/auth/profile/', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.ok) {\n        const profileData = await response.json();\n        setProfile(profileData);\n      } else {\n        throw new Error('ไม่สามารถดึงข้อมูลโปรไฟล์ได้');\n      }\n    } catch (err) {\n      console.error('Error fetching profile:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [user, isAuthenticated]);\n\n  // ฟังก์ชันอัพเดต Profile\n  const updateProfile = async formData => {\n    if (!isAuthenticated()) {\n      throw new Error('กรุณาเข้าสู่ระบบ');\n    }\n    try {\n      const token = localStorage.getItem('access_token');\n      const response = await fetch('http://localhost:8000/api/auth/profile/', {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData // ใช้ FormData สำหรับการอัพโหลดไฟล์\n      });\n      if (response.ok) {\n        const updatedProfile = await response.json();\n        setProfile(updatedProfile);\n        // สร้าง custom event เพื่อบอก components อื่นว่า profile อัพเดตแล้ว\n        window.dispatchEvent(new CustomEvent('profileUpdated', {\n          detail: updatedProfile\n        }));\n        return {\n          success: true,\n          data: updatedProfile\n        };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'ไม่สามารถอัพเดตโปรไฟล์ได้');\n      }\n    } catch (err) {\n      console.error('Error updating profile:', err);\n      throw err;\n    }\n  };\n\n  // ฟังก์ชันอัพโหลดรูปโปรไฟล์\n  const uploadProfileImage = async imageFile => {\n    if (!isAuthenticated()) {\n      throw new Error('กรุณาเข้าสู่ระบบ');\n    }\n    try {\n      const formData = new FormData();\n      formData.append('profile_image', imageFile);\n      const token = localStorage.getItem('access_token');\n      const response = await fetch('http://localhost:8000/api/auth/upload-profile-image/', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      if (response.ok) {\n        const result = await response.json();\n        // อัพเดต profile ใน state ทันที\n        setProfile(prev => ({\n          ...prev,\n          profile_image: result.profile_image\n        }));\n\n        // สร้าง custom event เพื่อบอก Navbar ว่ามีการอัพเดตรูป\n        window.dispatchEvent(new CustomEvent('profileImageUpdated', {\n          detail: result.profile_image\n        }));\n        return {\n          success: true,\n          data: result\n        };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'ไม่สามารถอัพโหลดรูปภาพได้');\n      }\n    } catch (err) {\n      console.error('Error uploading profile image:', err);\n      throw err;\n    }\n  };\n\n  // ฟังก์ชันสำหรับแสดงชื่อย่อ\n  const getInitials = fullName => {\n    if (!fullName) return 'U';\n    const names = fullName.split(' ');\n    if (names.length >= 2) {\n      return (names[0][0] + names[1][0]).toUpperCase();\n    }\n    return names[0][0].toUpperCase();\n  };\n\n  // ฟังก์ชันแสดงชื่อสั้น\n  const getDisplayName = fullName => {\n    if (!fullName) return 'User';\n    const names = fullName.split(' ');\n    if (names.length >= 2) {\n      return names[0]; // แสดงแค่ชื่อ\n    }\n    return fullName;\n  };\n\n  // ฟังก์ชันสำหรับ URL รูปโปรไฟล์\n  const getProfileImageUrl = () => {\n    if (!(profile !== null && profile !== void 0 && profile.profile_image)) return null;\n\n    // ตรวจสอบว่าเป็น URL เต็มหรือไม่\n    if (profile.profile_image.startsWith('http')) {\n      return profile.profile_image;\n    }\n\n    // ถ้าเป็น path สัมพัทธ์ ให้เพิ่ม base URL\n    return `http://localhost:8000${profile.profile_image}`;\n  };\n\n  // ฟังก์ชันรีเฟรชข้อมูล Profile\n  const refreshProfile = useCallback(() => {\n    fetchProfile();\n  }, [fetchProfile]);\n\n  // ฟังก์ชันสำหรับ force update จาก component อื่น\n  const forceUpdateProfile = useCallback(newProfileData => {\n    setProfile(newProfileData);\n  }, []);\n\n  // เรียกดึงข้อมูลเมื่อ component mount หรือ user เปลี่ยน\n  useEffect(() => {\n    fetchProfile();\n  }, [fetchProfile]);\n\n  // ฟัง custom events สำหรับการอัพเดต profile\n  useEffect(() => {\n    const handleProfileUpdate = event => {\n      setProfile(event.detail);\n    };\n    const handleImageUpdate = event => {\n      setProfile(prev => prev ? {\n        ...prev,\n        profile_image: event.detail\n      } : null);\n    };\n    window.addEventListener('profileUpdated', handleProfileUpdate);\n    window.addEventListener('profileImageUpdated', handleImageUpdate);\n    return () => {\n      window.removeEventListener('profileUpdated', handleProfileUpdate);\n      window.removeEventListener('profileImageUpdated', handleImageUpdate);\n    };\n  }, []);\n  return {\n    profile,\n    loading,\n    error,\n    updateProfile,\n    uploadProfileImage,\n    refreshProfile,\n    forceUpdateProfile,\n    getInitials,\n    getDisplayName,\n    getProfileImageUrl,\n    // Helper functions\n    fullName: (profile === null || profile === void 0 ? void 0 : profile.full_name) || (user === null || user === void 0 ? void 0 : user.full_name),\n    email: (profile === null || profile === void 0 ? void 0 : profile.email) || (user === null || user === void 0 ? void 0 : user.email),\n    userType: (profile === null || profile === void 0 ? void 0 : profile.user_type) || (user === null || user === void 0 ? void 0 : user.user_type),\n    initials: getInitials((profile === null || profile === void 0 ? void 0 : profile.full_name) || (user === null || user === void 0 ? void 0 : user.full_name)),\n    displayName: getDisplayName((profile === null || profile === void 0 ? void 0 : profile.full_name) || (user === null || user === void 0 ? void 0 : user.full_name)),\n    profileImageUrl: getProfileImageUrl()\n  };\n};\n_s(useProfile, \"bBIgPQu1QoSxHtPpsvxeb3nRqEs=\", false, function () {\n  return [useAuth];\n});\nexport default useProfile;","map":{"version":3,"names":["useState","useEffect","useCallback","useAuth","useProfile","_s","user","isAuthenticated","profile","setProfile","loading","setLoading","error","setError","fetchProfile","token","localStorage","getItem","response","fetch","method","headers","ok","profileData","json","Error","err","console","message","updateProfile","formData","body","updatedProfile","window","dispatchEvent","CustomEvent","detail","success","data","errorData","uploadProfileImage","imageFile","FormData","append","result","prev","profile_image","getInitials","fullName","names","split","length","toUpperCase","getDisplayName","getProfileImageUrl","startsWith","refreshProfile","forceUpdateProfile","newProfileData","handleProfileUpdate","event","handleImageUpdate","addEventListener","removeEventListener","full_name","email","userType","user_type","initials","displayName","profileImageUrl"],"sources":["D:/ai-resume-screening-system/frontend/src/hooks/useProfile.js"],"sourcesContent":["// frontend/src/hooks/useProfile.js - Improved Version with Real-time Updates\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst useProfile = () => {\r\n  const { user, isAuthenticated } = useAuth();\r\n  const [profile, setProfile] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // ฟังก์ชันดึงข้อมูล Profile\r\n  const fetchProfile = useCallback(async () => {\r\n    if (!isAuthenticated() || !user) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      const token = localStorage.getItem('access_token');\r\n      const response = await fetch('http://localhost:8000/api/auth/profile/', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        const profileData = await response.json();\r\n        setProfile(profileData);\r\n      } else {\r\n        throw new Error('ไม่สามารถดึงข้อมูลโปรไฟล์ได้');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching profile:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [user, isAuthenticated]);\r\n\r\n  // ฟังก์ชันอัพเดต Profile\r\n  const updateProfile = async (formData) => {\r\n    if (!isAuthenticated()) {\r\n      throw new Error('กรุณาเข้าสู่ระบบ');\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('access_token');\r\n      const response = await fetch('http://localhost:8000/api/auth/profile/', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: formData, // ใช้ FormData สำหรับการอัพโหลดไฟล์\r\n      });\r\n\r\n      if (response.ok) {\r\n        const updatedProfile = await response.json();\r\n        setProfile(updatedProfile);\r\n        // สร้าง custom event เพื่อบอก components อื่นว่า profile อัพเดตแล้ว\r\n        window.dispatchEvent(new CustomEvent('profileUpdated', { \r\n          detail: updatedProfile \r\n        }));\r\n        return { success: true, data: updatedProfile };\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.detail || 'ไม่สามารถอัพเดตโปรไฟล์ได้');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error updating profile:', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  // ฟังก์ชันอัพโหลดรูปโปรไฟล์\r\n  const uploadProfileImage = async (imageFile) => {\r\n    if (!isAuthenticated()) {\r\n      throw new Error('กรุณาเข้าสู่ระบบ');\r\n    }\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('profile_image', imageFile);\r\n\r\n      const token = localStorage.getItem('access_token');\r\n      const response = await fetch('http://localhost:8000/api/auth/upload-profile-image/', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        // อัพเดต profile ใน state ทันที\r\n        setProfile(prev => ({\r\n          ...prev,\r\n          profile_image: result.profile_image\r\n        }));\r\n        \r\n        // สร้าง custom event เพื่อบอก Navbar ว่ามีการอัพเดตรูป\r\n        window.dispatchEvent(new CustomEvent('profileImageUpdated', { \r\n          detail: result.profile_image \r\n        }));\r\n        \r\n        return { success: true, data: result };\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.detail || 'ไม่สามารถอัพโหลดรูปภาพได้');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error uploading profile image:', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  // ฟังก์ชันสำหรับแสดงชื่อย่อ\r\n  const getInitials = (fullName) => {\r\n    if (!fullName) return 'U';\r\n    \r\n    const names = fullName.split(' ');\r\n    if (names.length >= 2) {\r\n      return (names[0][0] + names[1][0]).toUpperCase();\r\n    }\r\n    return names[0][0].toUpperCase();\r\n  };\r\n\r\n  // ฟังก์ชันแสดงชื่อสั้น\r\n  const getDisplayName = (fullName) => {\r\n    if (!fullName) return 'User';\r\n    \r\n    const names = fullName.split(' ');\r\n    if (names.length >= 2) {\r\n      return names[0]; // แสดงแค่ชื่อ\r\n    }\r\n    return fullName;\r\n  };\r\n\r\n  // ฟังก์ชันสำหรับ URL รูปโปรไฟล์\r\n  const getProfileImageUrl = () => {\r\n    if (!profile?.profile_image) return null;\r\n    \r\n    // ตรวจสอบว่าเป็น URL เต็มหรือไม่\r\n    if (profile.profile_image.startsWith('http')) {\r\n      return profile.profile_image;\r\n    }\r\n    \r\n    // ถ้าเป็น path สัมพัทธ์ ให้เพิ่ม base URL\r\n    return `http://localhost:8000${profile.profile_image}`;\r\n  };\r\n\r\n  // ฟังก์ชันรีเฟรชข้อมูล Profile\r\n  const refreshProfile = useCallback(() => {\r\n    fetchProfile();\r\n  }, [fetchProfile]);\r\n\r\n  // ฟังก์ชันสำหรับ force update จาก component อื่น\r\n  const forceUpdateProfile = useCallback((newProfileData) => {\r\n    setProfile(newProfileData);\r\n  }, []);\r\n\r\n  // เรียกดึงข้อมูลเมื่อ component mount หรือ user เปลี่ยน\r\n  useEffect(() => {\r\n    fetchProfile();\r\n  }, [fetchProfile]);\r\n\r\n  // ฟัง custom events สำหรับการอัพเดต profile\r\n  useEffect(() => {\r\n    const handleProfileUpdate = (event) => {\r\n      setProfile(event.detail);\r\n    };\r\n\r\n    const handleImageUpdate = (event) => {\r\n      setProfile(prev => prev ? {\r\n        ...prev,\r\n        profile_image: event.detail\r\n      } : null);\r\n    };\r\n\r\n    window.addEventListener('profileUpdated', handleProfileUpdate);\r\n    window.addEventListener('profileImageUpdated', handleImageUpdate);\r\n\r\n    return () => {\r\n      window.removeEventListener('profileUpdated', handleProfileUpdate);\r\n      window.removeEventListener('profileImageUpdated', handleImageUpdate);\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    profile,\r\n    loading,\r\n    error,\r\n    updateProfile,\r\n    uploadProfileImage,\r\n    refreshProfile,\r\n    forceUpdateProfile,\r\n    getInitials,\r\n    getDisplayName,\r\n    getProfileImageUrl,\r\n    // Helper functions\r\n    fullName: profile?.full_name || user?.full_name,\r\n    email: profile?.email || user?.email,\r\n    userType: profile?.user_type || user?.user_type,\r\n    initials: getInitials(profile?.full_name || user?.full_name),\r\n    displayName: getDisplayName(profile?.full_name || user?.full_name),\r\n    profileImageUrl: getProfileImageUrl(),\r\n  };\r\n};\r\n\r\nexport default useProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}