{"ast":null,"code":"var _jsxFileName = \"D:\\\\ai-resume-screening-system\\\\frontend\\\\src\\\\components\\\\ProtectedRoute\\\\ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/components/ProtectedRoute/ProtectedRoute.jsx\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  allowedRoles = []\n}) => {\n  _s();\n  const {\n    user,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // แสดง loading spinner ขณะตรวจสอบ authentication\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E15\\u0E23\\u0E27\\u0E08\\u0E2A\\u0E2D\\u0E1A\\u0E2A\\u0E34\\u0E17\\u0E18\\u0E34\\u0E4C...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this);\n  }\n\n  // ถ้าไม่ได้ login ให้ redirect ไป login page\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 12\n    }, this);\n  }\n\n  // ตรวจสอบ role ถ้ามีการกำหนด allowedRoles\n  if (allowedRoles.length > 0 && !allowedRoles.includes(user.user_type)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-denied\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E2A\\u0E34\\u0E17\\u0E18\\u0E34\\u0E4C\\u0E40\\u0E02\\u0E49\\u0E32\\u0E16\\u0E36\\u0E07\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0E04\\u0E38\\u0E13\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E2A\\u0E34\\u0E17\\u0E18\\u0E34\\u0E4C\\u0E40\\u0E02\\u0E49\\u0E32\\u0E16\\u0E36\\u0E07\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E19\\u0E35\\u0E49\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.history.back(),\n        children: \"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E01\\u0E48\\u0E2D\\u0E19\\u0E2B\\u0E19\\u0E49\\u0E32\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this);\n  }\n  return children;\n};\n_s(ProtectedRoute, \"zPafkKLdz6KrRvMe2id3iDpNU34=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","ProtectedRoute","children","allowedRoles","_s","user","loading","location","className","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","length","includes","user_type","onClick","window","history","back","_c","$RefreshReg$"],"sources":["D:/ai-resume-screening-system/frontend/src/components/ProtectedRoute/ProtectedRoute.jsx"],"sourcesContent":["// frontend/src/components/ProtectedRoute/ProtectedRoute.jsx\r\nimport React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children, allowedRoles = [] }) => {\r\n  const { user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  // แสดง loading spinner ขณะตรวจสอบ authentication\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        <div className=\"loading-spinner\">\r\n          <div className=\"spinner\"></div>\r\n          <p>กำลังตรวจสอบสิทธิ์...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ถ้าไม่ได้ login ให้ redirect ไป login page\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  // ตรวจสอบ role ถ้ามีการกำหนด allowedRoles\r\n  if (allowedRoles.length > 0 && !allowedRoles.includes(user.user_type)) {\r\n    return (\r\n      <div className=\"access-denied\">\r\n        <h2>ไม่มีสิทธิ์เข้าถึง</h2>\r\n        <p>คุณไม่มีสิทธิ์เข้าถึงหน้านี้</p>\r\n        <button onClick={() => window.history.back()}>\r\n          กลับหน้าก่อนหน้า\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,YAAY,GAAG;AAAG,CAAC,KAAK;EAAAC,EAAA;EAC1D,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGR,OAAO,CAAC,CAAC;EACnC,MAAMS,QAAQ,GAAGV,WAAW,CAAC,CAAC;;EAE9B;EACA,IAAIS,OAAO,EAAE;IACX,oBACEN,OAAA;MAAKQ,SAAS,EAAC,mBAAmB;MAAAN,QAAA,eAChCF,OAAA;QAAKQ,SAAS,EAAC,iBAAiB;QAAAN,QAAA,gBAC9BF,OAAA;UAAKQ,SAAS,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC/BZ,OAAA;UAAAE,QAAA,EAAG;QAAqB;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;;EAEA;EACA,IAAI,CAACP,IAAI,EAAE;IACT,oBAAOL,OAAA,CAACJ,QAAQ;MAACiB,EAAE,EAAC,QAAQ;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAER;MAAS,CAAE;MAACS,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpE;;EAEA;EACA,IAAIT,YAAY,CAACc,MAAM,GAAG,CAAC,IAAI,CAACd,YAAY,CAACe,QAAQ,CAACb,IAAI,CAACc,SAAS,CAAC,EAAE;IACrE,oBACEnB,OAAA;MAAKQ,SAAS,EAAC,eAAe;MAAAN,QAAA,gBAC5BF,OAAA;QAAAE,QAAA,EAAI;MAAkB;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC3BZ,OAAA;QAAAE,QAAA,EAAG;MAA4B;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACnCZ,OAAA;QAAQoB,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,CAAE;QAAArB,QAAA,EAAC;MAE9C;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV;EAEA,OAAOV,QAAQ;AACjB,CAAC;AAACE,EAAA,CAnCIH,cAAc;EAAA,QACQH,OAAO,EAChBD,WAAW;AAAA;AAAA2B,EAAA,GAFxBvB,cAAc;AAqCpB,eAAeA,cAAc;AAAC,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}