{"ast":null,"code":"// frontend/src/services/profileService.js - ไฟล์ใหม่สำหรับจัดการโปรไฟล์ทุก Role\nimport axios from 'axios';\n\n// Base API URL\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\n\n// Create axios instance with default config\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle errors\napiClient.interceptors.response.use(response => {\n  return response;\n}, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    // Token expired or invalid\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// Profile Service Functions (ทุก Role สามารถใช้ได้)\nexport const profileService = {\n  // Get profile\n  getProfile: async () => {\n    try {\n      const response = await apiClient.get('/profile');\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Error fetching profile:', error);\n      throw new Error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.detail) || 'ไม่สามารถโหลดข้อมูลโปรไฟล์ได้');\n    }\n  },\n  // Update profile\n  updateProfile: async profileData => {\n    try {\n      const response = await apiClient.put('/profile', profileData);\n      return response.data;\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('Error updating profile:', error);\n      throw new Error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.detail) || 'ไม่สามารถอัปเดตข้อมูลได้');\n    }\n  },\n  // Upload profile image\n  uploadProfileImage: async imageFile => {\n    try {\n      const formData = new FormData();\n      formData.append('file', imageFile);\n      const response = await apiClient.post('/profile/upload-image', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      console.error('Error uploading profile image:', error);\n      throw new Error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.detail) || 'ไม่สามารถอัปโหลดรูปภาพได้');\n    }\n  },\n  // Delete profile image\n  deleteProfileImage: async () => {\n    try {\n      const response = await apiClient.delete('/profile/image');\n      return response.data;\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      console.error('Error deleting profile image:', error);\n      throw new Error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.detail) || 'ไม่สามารถลบรูปภาพได้');\n    }\n  },\n  // Change password\n  changePassword: async passwordData => {\n    try {\n      const response = await apiClient.post('/profile/change-password', passwordData);\n      return response.data;\n    } catch (error) {\n      var _error$response6, _error$response6$data;\n      console.error('Error changing password:', error);\n      throw new Error(((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.detail) || 'ไม่สามารถเปลี่ยนรหัสผ่านได้');\n    }\n  },\n  // Get dashboard data (ข้อมูลต่างกันตาม Role)\n  getDashboardData: async () => {\n    try {\n      const response = await apiClient.get('/profile/dashboard');\n      return response.data;\n    } catch (error) {\n      var _error$response7, _error$response7$data;\n      console.error('Error fetching dashboard data:', error);\n      throw new Error(((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.detail) || 'ไม่สามารถโหลดข้อมูลแดชบอร์ดได้');\n    }\n  }\n};\n\n// Named exports for backward compatibility\nexport const getProfile = profileService.getProfile;\nexport const updateProfile = profileService.updateProfile;\nexport const uploadProfileImage = profileService.uploadProfileImage;\nexport const deleteProfileImage = profileService.deleteProfileImage;\nexport const changePassword = profileService.changePassword;\nexport const getDashboardData = profileService.getDashboardData;\nexport default profileService;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","profileService","getProfile","get","data","_error$response2","_error$response2$data","console","Error","detail","updateProfile","profileData","put","_error$response3","_error$response3$data","uploadProfileImage","imageFile","formData","FormData","append","post","_error$response4","_error$response4$data","deleteProfileImage","delete","_error$response5","_error$response5$data","changePassword","passwordData","_error$response6","_error$response6$data","getDashboardData","_error$response7","_error$response7$data"],"sources":["D:/ai-resume-screening-system/frontend/src/services/profileService.js"],"sourcesContent":["// frontend/src/services/profileService.js - ไฟล์ใหม่สำหรับจัดการโปรไฟล์ทุก Role\r\nimport axios from 'axios';\r\n\r\n// Base API URL\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\r\n\r\n// Create axios instance with default config\r\nconst apiClient = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor to add auth token\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle errors\r\napiClient.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Token expired or invalid\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Profile Service Functions (ทุก Role สามารถใช้ได้)\r\nexport const profileService = {\r\n  // Get profile\r\n  getProfile: async () => {\r\n    try {\r\n      const response = await apiClient.get('/profile');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching profile:', error);\r\n      throw new Error(error.response?.data?.detail || 'ไม่สามารถโหลดข้อมูลโปรไฟล์ได้');\r\n    }\r\n  },\r\n\r\n  // Update profile\r\n  updateProfile: async (profileData) => {\r\n    try {\r\n      const response = await apiClient.put('/profile', profileData);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      throw new Error(error.response?.data?.detail || 'ไม่สามารถอัปเดตข้อมูลได้');\r\n    }\r\n  },\r\n\r\n  // Upload profile image\r\n  uploadProfileImage: async (imageFile) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', imageFile);\r\n      \r\n      const response = await apiClient.post('/profile/upload-image', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error uploading profile image:', error);\r\n      throw new Error(error.response?.data?.detail || 'ไม่สามารถอัปโหลดรูปภาพได้');\r\n    }\r\n  },\r\n\r\n  // Delete profile image\r\n  deleteProfileImage: async () => {\r\n    try {\r\n      const response = await apiClient.delete('/profile/image');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error deleting profile image:', error);\r\n      throw new Error(error.response?.data?.detail || 'ไม่สามารถลบรูปภาพได้');\r\n    }\r\n  },\r\n\r\n  // Change password\r\n  changePassword: async (passwordData) => {\r\n    try {\r\n      const response = await apiClient.post('/profile/change-password', passwordData);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error changing password:', error);\r\n      throw new Error(error.response?.data?.detail || 'ไม่สามารถเปลี่ยนรหัสผ่านได้');\r\n    }\r\n  },\r\n\r\n  // Get dashboard data (ข้อมูลต่างกันตาม Role)\r\n  getDashboardData: async () => {\r\n    try {\r\n      const response = await apiClient.get('/profile/dashboard');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching dashboard data:', error);\r\n      throw new Error(error.response?.data?.detail || 'ไม่สามารถโหลดข้อมูลแดชบอร์ดได้');\r\n    }\r\n  },\r\n};\r\n\r\n// Named exports for backward compatibility\r\nexport const getProfile = profileService.getProfile;\r\nexport const updateProfile = profileService.updateProfile;\r\nexport const uploadProfileImage = profileService.uploadProfileImage;\r\nexport const deleteProfileImage = profileService.deleteProfileImage;\r\nexport const changePassword = profileService.changePassword;\r\nexport const getDashboardData = profileService.getDashboardData;\r\n\r\nexport default profileService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}